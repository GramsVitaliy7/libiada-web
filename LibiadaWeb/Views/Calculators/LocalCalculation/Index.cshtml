@using LibiadaWeb.Helpers
@model dynamic

@{
    ViewBag.Title = "Local characteristics";
}

<h2>Local characteristics</h2>

<script type="text/javascript">

    var divCounter = 0;

    $(document).ready(function() {

        AddCharacteristic();
    });

    function AddCharacteristic() {

        var paramsList = new Object();

        @Html.FillOptionsList("characteristicIds", (IEnumerable<SelectListItem>)ViewBag.characteristicsList)
        @Html.FillOptionsList("linkIds", (IEnumerable<SelectListItem>)ViewBag.linksList)

        var characteristicsDiv = CreateCharacteristicsBlock(divCounter, paramsList);
        $("#characteristics_list").append(characteristicsDiv);
        divCounter++;

        return false;
    }
</script>

@using (Html.BeginForm())
{
    @Html.MattersTable((List<SelectListItem>)ViewBag.matterCheckBoxes, (List<Matter>)ViewBag.matters)
    <br/>
    @Html.Label("Window size:")
    <input type="number" id="length" name="length" value="50"/>
    @Html.Label("Step size:")
    <input type="number" id="step" name="step" value="2"/>
    <br/>
    <br/>
    @Html.CheckBox("isDelta", "Считать разницу между характеристиками", null)
    <br/>
    @Html.CheckBox("isGrowingWindow", "Growing window (start is fixed at 0)", null)
    <br/>
    @Html.CheckBox("isFourier", "Calculate Fast fourier transform", null)
    <br/>
    @Html.CheckBox("isAutocorrelation", "Calculate autocorrelation", null)
    <br/>
    <br/>
    @Html.Label("Notation:")
    <select name="notationId">
        @foreach (var option in ViewBag.notationsList)
        {
            <option value="@option.Value">@option.Text</option>
        }
    </select>
    <br/>
    @Html.Label("Language:")
    <select name="languageId">
        @foreach (var option in ViewBag.languagesList)
        {
            <option value="@option.Value">@option.Text</option>
        }
    </select>
    <br/>
    <br/>
    <input type="button" onclick=" AddCharacteristic() " value="Add characteristic"/>
    <br/>
    <div id="characteristics_list"></div>
    <br/>
    <br/>
    <input type="submit" value="Calculate"/>
}
@section Scripts {
    @Scripts.Render("~/bundles/angularjs")
    @Scripts.Render("~/bundles/procedures")
}